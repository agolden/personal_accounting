<?php	function writeXML($recordName, $query, $dbh)	{		$stmt = $dbh->prepare($query);		$stmt->execute(null);		$response = array();		$records = $stmt->fetchAll();		echo "<" . $recordName . "s>";				foreach($records as $record) {			echo "<$recordName>";			foreach ($record as $key => $value)			{				if (!is_numeric($key))					echo "<$key>$value</$key>";			}			echo "</$recordName>";		}					echo "</" . $recordName . "s>";	}	header("Content-type: text/xml");	echo "<?xml version=\"1.0\"?>";	echo "<records>";	require_once('../hidden/DatabaseConnection.php');		$dbh = (new DatabaseConnection)->getConn();	$query = 'SELECT account_type.id AS id, account_type.name AS name, SUM(account_transaction.amount) AS total FROM account LEFT JOIN(account_category, account_type, account_transaction) ON account.category_id=account_category.id AND account_category.type_id = account_type.id AND account_transaction.account_id = account.id WHERE account_transaction.transaction_category_id <> 4 GROUP BY account_type.id ORDER BY account_type.name';	writeXML("account_type", $query, $dbh);	$query = 'SELECT account_category.id AS account_category_id, account_category.type_id AS account_type_id, account_category.name, SUM(account_transaction.amount) AS total FROM account LEFT JOIN(account_category, account_type, account_transaction) ON account.category_id=account_category.id AND account_category.type_id = account_type.id AND account_transaction.account_id = account.id WHERE account_transaction.transaction_category_id <> 4 GROUP BY account_category.id ORDER BY account_type.name, account_category.id';	writeXML("account_category", $query, $dbh);		$query = "SELECT account.id AS account_id, account.name AS account_name, account.description AS account_description, account_category.id AS account_category_id, SUM(account_transaction.amount) AS account_balance FROM account LEFT JOIN(account_category, account_type, account_transaction) ON account.category_id=account_category.id AND account_category.type_id = account_type.id AND account_transaction.account_id = account.id WHERE account_transaction.transaction_category_id <> 4 GROUP BY account.name ORDER BY account_type.name, account_category.id";	if (strcmp($_GET['nonzero'], "true") == 0)	{		$query = "SELECT * FROM (" . $query . ") accounts WHERE account_balance > 0";	}	writeXML("account", $query, $dbh);		echo "</records>";?>